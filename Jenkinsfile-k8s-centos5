pipeline {
    agent none
    environment {
        PROJECT = "TESTING JENKINS SLAVE IN NR"
    }
    stages {
        stage('Run busybox') {
            agent {
                kubernetes {
                    label 'jenkins-linux-slave'
                    yamlFile 'JenkinsKubernetesPod.yaml'
                }
            }
            steps {
                // The needed steps for your testing
                container('busybox') {
                    sh """
                        echo $PROJECT
                        busybox | head -1
                    """
                   }
            }
        }
        stage('Run win') {
            agent {
                kubernetes {
                    label 'jenkins-windows-slave'
                    yamlFile 'JenkinsKubernetesPodWindows.yaml'
                    nodeSelector 'beta.kubernetes.io/os: "windows"'
                }
            }
            steps {
                // The needed steps for your testing
                container('windows') {
                    bat 'dotnet -h'
               }
            }
        }
    }
}